<div id="history" class="bg-white/90 backdrop-blur-xl rounded-2xl md:rounded-3xl shadow-2xl border border-white/60 overflow-hidden flex flex-col h-full scroll-mt-20 md:scroll-mt-24">
    <!-- Заголовок с градиентом -->
    <div class="bg-gradient-to-r from-blue-500 via-indigo-500 to-purple-500 p-4 md:p-5 min-h-[88px] md:min-h-[100px] flex items-center justify-center flex-shrink-0">
        <div class="flex items-start gap-2 md:gap-3">
            <div class="w-10 h-10 md:w-12 md:h-12 bg-white/20 backdrop-blur rounded-xl md:rounded-2xl flex items-center justify-center flex-shrink-0">
                <i class="fas fa-history text-white text-lg md:text-xl"></i>
            </div>
            <div class="flex flex-col -mt-1 md:-mt-0.5">
                <h2 class="text-xl md:text-2xl font-bold text-white"><span data-i18n="transaction_history">История транзакций</span></h2>
                <p class="text-white/80 text-sm mt-0 md:mt-0.5"><span data-i18n="all_xp_operations">Все операции с XP</span></p>
            </div>
        </div>
    </div>

    <div class="p-5 flex flex-col flex-1 min-h-0">
        <!-- Фильтр периода -->
        <div class="mb-4">
            <label class="block text-sm font-medium text-gray-700 mb-2">
                <i class="fas fa-filter text-indigo-600 mr-1"></i>
                <span data-i18n="filter_period">Период</span>
            </label>
            <div class="flex flex-wrap gap-2">
                <button onclick="setHistoryPeriod('today')" id="history-period-today" class="history-period-btn px-3 py-1.5 text-sm rounded-lg bg-indigo-500 text-white font-medium transition-all hover:bg-indigo-600">
                    <span data-i18n="today">Сегодня</span>
                </button>
                <button onclick="setHistoryPeriod('week')" id="history-period-week" class="history-period-btn px-3 py-1.5 text-sm rounded-lg bg-gray-200 text-gray-700 font-medium transition-all hover:bg-gray-300">
                    <span data-i18n="week">Неделя</span>
                </button>
                <button onclick="setHistoryPeriod('month')" id="history-period-month" class="history-period-btn px-3 py-1.5 text-sm rounded-lg bg-gray-200 text-gray-700 font-medium transition-all hover:bg-gray-300">
                    <span data-i18n="month">Месяц</span>
                </button>
                <button onclick="setHistoryPeriod('year')" id="history-period-year" class="history-period-btn px-3 py-1.5 text-sm rounded-lg bg-gray-200 text-gray-700 font-medium transition-all hover:bg-gray-300">
                    <span data-i18n="year">Год</span>
                </button>
                <button onclick="setHistoryPeriod('all')" id="history-period-all" class="history-period-btn px-3 py-1.5 text-sm rounded-lg bg-gray-200 text-gray-700 font-medium transition-all hover:bg-gray-300">
                    <span data-i18n="all">Все</span>
                </button>
            </div>
        </div>
        <!-- Список истории -->
        <div class="flex flex-col flex-1 min-h-0">
            <div id="history-list-container" class="overflow-x-hidden pr-2 relative flex-1 min-h-0">
                <div id="history-list-visible" class="space-y-2"></div>
                <div id="history-list-hidden" class="space-y-2 hidden"></div>
            </div>
            <button id="history-accordion-btn" onclick="toggleHistoryAccordion()" class="hidden mt-3 mb-3 w-full py-2.5 px-4 bg-gradient-to-r from-blue-100 to-purple-100 hover:from-blue-200 hover:to-purple-200 text-blue-700 rounded-xl font-medium transition-all duration-300 flex items-center justify-center gap-2 group flex-shrink-0">
                <span class="accordion-text" data-i18n="show_all_history">Показать всю историю</span>
                <i class="fas fa-chevron-down accordion-icon transition-transform duration-300"></i>
            </button>
        </div>
    </div>
</div>
