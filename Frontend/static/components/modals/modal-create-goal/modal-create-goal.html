<div id="create-goal-modal" class="hidden fixed inset-0 bg-black/50 backdrop-blur-sm z-50 flex items-center justify-center p-4 overflow-y-auto" lang="ru" onclick="if(event.target === this) closeCreateGoalModal()">
    <div class="bg-white rounded-2xl shadow-2xl max-w-md w-full p-6 my-8 max-h-[90vh] overflow-y-auto" onclick="event.stopPropagation()">
        <div class="flex justify-between items-center mb-4 relative">
            <h3 class="text-2xl font-bold text-gray-800 text-center flex-1" id="goal-modal-title" data-i18n="new_goal">üéØ –ù–æ–≤–∞—è —Ü–µ–ª—å</h3>
            <button onclick="closeCreateGoalModal()" class="text-gray-400 hover:text-gray-600 text-2xl absolute right-0">&times;</button>
        </div>
        <form id="create-goal-form" class="space-y-4" lang="ru">
            <input type="hidden" id="edit-goal-id" value="">
            <div class="bg-purple-50 border border-purple-200 rounded-xl p-3 mb-2">
                <p class="text-xs text-purple-700">
                    <i class="fas fa-info-circle mr-1"></i>
                    <strong data-i18n="important">–í–∞–∂–Ω–æ:</strong> <span data-i18n="goal_info_text">–í—ã–±–µ—Ä–∏—Ç–µ –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—å –∏–∑ –≤–∞—à–µ–≥–æ —Å–ø–∏—Å–∫–∞. –¶–µ–ª—å –±—É–¥–µ—Ç –æ—Ç—Å–ª–µ–∂–∏–≤–∞—Ç—å –ø—Ä–æ–≥—Ä–µ—Å—Å —Ç–æ–ª—å–∫–æ –ø–æ —ç—Ç–æ–π –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏.</span>
                </p>
            </div>

            <div>
                <label class="block text-sm font-medium text-gray-700 mb-1">
                    <i class="fas fa-tasks text-purple-600 mr-1"></i><span data-i18n="select_activity_label">–í—ã–±–µ—Ä–∏—Ç–µ –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—å</span> <span class="text-red-500">*</span>
                </label>
                <select id="goal-activity" class="w-full p-3 border-2 border-purple-300 rounded-xl focus:border-purple-500 focus:ring-2 focus:ring-purple-300 transition-all bg-white" required>
                    <option value="" data-i18n="loading_activities">-- –ó–∞–≥—Ä—É–∑–∫–∞ –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–µ–π --</option>
                </select>
                <p class="text-xs text-gray-500 mt-1 flex items-center gap-1">
                    <i class="fas fa-lightbulb text-amber-500"></i>
                    <span data-i18n="create_activity_first">–°–Ω–∞—á–∞–ª–∞ —Å–æ–∑–¥–∞–π—Ç–µ –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—å, –µ—Å–ª–∏ –µ—ë –Ω–µ—Ç –≤ —Å–ø–∏—Å–∫–µ</span>
                </p>
            </div>

            <div>
                <label class="block text-sm font-medium text-gray-700 mb-1" data-i18n="goal_title">–ù–∞–∑–≤–∞–Ω–∏–µ —Ü–µ–ª–∏</label>
                <input type="text" id="goal-title" data-i18n-placeholder="goal_title_placeholder" placeholder="–ù–∞–ø—Ä–∏–º–µ—Ä: –ò–∑—É—á–∏—Ç—å 100 —á–∞—Å–æ–≤ –Ω–µ–º–µ—Ü–∫–æ–≥–æ"
                       class="w-full p-3 border-2 border-gray-200 rounded-xl focus:border-purple-400 focus:ring-2 focus:ring-purple-200 transition-all">
            </div>

            <!-- –ü–µ—Ä–µ–∫–ª—é—á–∞—Ç–µ–ª—å —Ä–µ–∂–∏–º–∞ —Ü–µ–ª–∏ (—Ç–æ–ª—å–∫–æ –¥–ª—è –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–µ–π –≤ —à—Ç—É–∫–∞—Ö) -->
            <div id="goal-mode-selector" class="hidden">
                <label class="block text-sm font-medium text-gray-700 mb-2">–í—ã–±–µ—Ä–∏—Ç–µ —Ç–∏–ø —Ü–µ–ª–∏:</label>
                <div class="flex gap-3 mb-3">
                    <label class="flex-1 p-3 border-2 border-purple-300 rounded-xl cursor-pointer hover:bg-purple-50 transition-all goal-mode-option">
                        <input type="radio" name="goal-mode" value="quantity" class="sr-only" checked>
                        <div class="text-center">
                            <i class="fas fa-hashtag text-purple-600 mb-1"></i>
                            <div class="text-sm font-medium text-gray-700">–ü–æ –∫–æ–ª–∏—á–µ—Å—Ç–≤—É</div>
                        </div>
                    </label>
                    <label class="flex-1 p-3 border-2 border-gray-200 rounded-xl cursor-pointer hover:bg-gray-50 transition-all goal-mode-option">
                        <input type="radio" name="goal-mode" value="xp" class="sr-only">
                        <div class="text-center">
                            <i class="fas fa-coins text-purple-600 mb-1"></i>
                            <div class="text-sm font-medium text-gray-700">–ü–æ XP</div>
                        </div>
                    </label>
                </div>
            </div>

            <!-- –ü–æ–ª–µ —Ü–µ–ª–µ–≤–æ–≥–æ –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ XP (–¥–ª—è –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–µ–π –≤–æ –≤—Ä–µ–º–µ–Ω–∏ –∏–ª–∏ –≤—ã–±—Ä–∞–Ω —Ä–µ–∂–∏–º XP) -->
            <div id="goal-xp-container">
                <label class="block text-sm font-medium text-gray-700 mb-1" data-i18n="target_xp">–¶–µ–ª–µ–≤–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ XP <span class="text-red-500">*</span></label>
                <input type="number" id="goal-target-xp" placeholder="1000" min="1" step="1"
                       class="w-full p-3 border-2 border-gray-200 rounded-xl focus:border-purple-400 focus:ring-2 focus:ring-purple-200 transition-all" required>
                <p class="text-xs text-gray-500 mt-1" data-i18n="target_xp_description">–°–∫–æ–ª—å–∫–æ XP –Ω—É–∂–Ω–æ –∑–∞—Ä–∞–±–æ—Ç–∞—Ç—å –¥–ª—è –¥–æ—Å—Ç–∏–∂–µ–Ω–∏—è —Ü–µ–ª–∏</p>
            </div>

            <!-- –ü–æ–ª–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ —à—Ç—É–∫ (—Ç–æ–ª—å–∫–æ –¥–ª—è –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–µ–π –≤ —à—Ç—É–∫–∞—Ö –≤ —Ä–µ–∂–∏–º–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞) -->
            <div id="goal-quantity-container" class="hidden">
                <label class="block text-sm font-medium text-gray-700 mb-1" data-i18n="target_quantity">–ö-–≤–æ –¥–ª—è –¥–æ—Å—Ç–∏–∂–µ–Ω–∏—è <span class="text-red-500">*</span></label>
                <input type="number" id="goal-target-quantity" placeholder="1500" min="1" step="1"
                       class="w-full p-3 border-2 border-gray-200 rounded-xl focus:border-purple-400 focus:ring-2 focus:ring-purple-200 transition-all">
                <p class="text-xs text-gray-500 mt-1" data-i18n="target_quantity_description">–¶–µ–ª–µ–≤–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ (–¥–ª—è –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–µ–π –≤ —à—Ç—É–∫–∞—Ö)</p>
            </div>

            <div>
                <label class="block text-sm font-medium text-gray-700 mb-1" data-i18n="completion_bonus_xp">–ë–æ–Ω—É—Å XP –∑–∞ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏–µ —Ü–µ–ª–∏</label>
                <input type="number" id="goal-completion-bonus" placeholder="0" min="0" step="1" value="0"
                       class="w-full p-3 border-2 border-gray-200 rounded-xl focus:border-purple-400 focus:ring-2 focus:ring-purple-200 transition-all">
                <p class="text-xs text-gray-500 mt-1" data-i18n="completion_bonus_xp_description">–î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–π –±–æ–Ω—É—Å XP –ø—Ä–∏ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏–∏ —Ü–µ–ª–∏</p>
            </div>

            <div>
                <label class="block text-sm font-medium text-gray-700 mb-1" data-i18n="description">–û–ø–∏—Å–∞–Ω–∏–µ (–Ω–µ–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ)</label>
                <textarea id="goal-description" data-i18n-placeholder="goal_description_placeholder" placeholder="–î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ —Ü–µ–ª–∏"
                          class="w-full p-3 border-2 border-gray-200 rounded-xl focus:border-purple-400 focus:ring-2 focus:ring-purple-200 transition-all" rows="2"></textarea>
            </div>

            <div>
                <label class="block text-sm font-medium text-gray-700 mb-1" data-i18n="deadline">–î–µ–¥–ª–∞–π–Ω (–Ω–µ–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ)</label>
                <input type="date" id="goal-target-date" lang="ru"
                       class="w-full p-3 border-2 border-gray-200 rounded-xl focus:border-purple-400 focus:ring-2 focus:ring-purple-200 transition-all">
                <p class="text-xs text-gray-500 mt-1" id="deadline-description-text">–£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –¥–∞—Ç—É, –∫ –∫–æ—Ç–æ—Ä–æ–π —Ö–æ—Ç–∏—Ç–µ –¥–æ—Å—Ç–∏—á—å —Ü–µ–ª–∏. –§–æ—Ä–º–∞—Ç: <span id="date-format-text">–¥–¥.–º–º.–≥–≥–≥–≥</span></p>
            </div>

            <button type="submit" class="w-full bg-gradient-to-r from-purple-500 to-pink-500 hover:from-purple-600 hover:to-pink-600 text-white py-3 px-6 rounded-xl font-bold transition-all shadow-lg hover:shadow-xl" id="goal-submit-btn">
                <i class="fas fa-check mr-2"></i><span data-i18n="create_goal_btn">–°–æ–∑–¥–∞—Ç—å —Ü–µ–ª—å</span>
            </button>
        </form>
    </div>
</div>
