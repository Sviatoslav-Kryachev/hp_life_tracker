/* ============= RESPONSIVE UTILITIES ============= */
/* Общие медиа-запросы и адаптивные утилиты */

/* Prevent horizontal scroll globally */
@media (max-width: 1024px) {
    html, body {
        overflow-x: hidden !important;
        width: 100% !important;
        max-width: 100vw !important;
        position: relative !important;
    }
}

/* Mobile devices (до 640px) */
@media (max-width: 640px) {
    /* Grid контейнеры */
    .grid.grid-cols-1,
    .grid.grid-cols-1.md\\:grid-cols-3 {
        width: 100% !important;
        max-width: 100% !important;
        box-sizing: border-box !important;
        margin-left: 0 !important;
        margin-right: 0 !important;
        padding-left: 0 !important;
        padding-right: 0 !important;
        gap: 1rem !important;
    }
    
    .grid.grid-cols-1 > div,
    .grid.grid-cols-1.md\\:grid-cols-3 > div {
        width: 100% !important;
        max-width: 100% !important;
        box-sizing: border-box !important;
    }
    
    /* Grid с 3 колонками */
    .grid.lg\\:grid-cols-3 {
        width: 100% !important;
        max-width: 100% !important;
        box-sizing: border-box !important;
        margin-left: 0 !important;
        margin-right: 0 !important;
        padding-left: 0 !important;
        padding-right: 0 !important;
        gap: 1rem !important;
    }
    
    /* Sidebar */
    .grid.lg\\:grid-cols-3 > .lg\\:col-span-1 {
        padding-left: 0 !important;
        padding-right: 0 !important;
        margin-left: 0 !important;
        margin-right: 0 !important;
        width: 100% !important;
        max-width: 100% !important;
        overflow: visible !important;
    }
    
    .grid.lg\\:grid-cols-3 > .lg\\:col-span-1 > div {
        margin-left: 0 !important;
        margin-right: 0 !important;
        padding-left: 0.75rem !important;
        padding-right: 0.75rem !important;
        width: 100% !important;
        max-width: 100% !important;
        overflow: visible !important;
        box-sizing: border-box !important;
    }
    
    /* Activities section */
    .grid.lg\\:grid-cols-3 > #activities,
    .grid.lg\\:grid-cols-3 > .lg\\:col-span-2 {
        width: 100% !important;
        max-width: 100% !important;
        box-sizing: border-box !important;
        margin-left: 0 !important;
        margin-right: 0 !important;
        padding-left: 0.75rem !important;
        padding-right: 0.75rem !important;
    }
    
    /* Activity cards */
    .activity-card {
        width: 100% !important;
        max-width: 100% !important;
        box-sizing: border-box !important;
        padding-left: 0.75rem !important;
        padding-right: 0.75rem !important;
        overflow-x: hidden !important;
        gap: 0.5rem !important;
    }
    
    .activity-card > div:first-child {
        min-width: 0 !important;
        flex: 1 1 auto !important;
        max-width: 100% !important;
        overflow: hidden !important;
    }
    
    .activity-card > button,
    .activity-card .timer-btn,
    .activity-card .manual-time-btn,
    .activity-card .edit-btn,
    .activity-card .delete-btn {
        flex-shrink: 0 !important;
        min-width: auto !important;
    }
    
    /* Activities container */
    #activities,
    #activities > div,
    .bg-gradient-to-r.from-blue-50.to-indigo-50 {
        padding-right: 0.75rem !important;
        padding-left: 0.75rem !important;
        margin-right: 0 !important;
        margin-left: 0 !important;
        box-sizing: border-box !important;
        max-width: 100% !important;
        width: 100% !important;
        overflow-x: hidden !important;
        overflow-y: visible !important;
    }
    
    #activities * {
        max-width: 100% !important;
        box-sizing: border-box !important;
    }
    
    /* Safe area для iOS */
    @supports (padding: env(safe-area-inset-top)) {
        #app-section > .container {
            padding-top: calc(4.5rem + env(safe-area-inset-top));
        }
    }
}

/* Tablets and mobile (до 1024px) */
@media (max-width: 1024px) {
    /* Мобильная навигация - показ/скрытие секций вместо скролла */
    /* По умолчанию все grid контейнеры скрыты на мобильных */
    .grid.lg\\:grid-cols-3 {
        display: none !important;
    }
    
    /* Показываем только те, которые имеют класс mobile-section-visible */
    .mobile-section-visible {
        display: grid !important; /* grid для grid контейнеров */
    }
    
    .mobile-section-hidden {
        display: none !important;
    }
    
    /* Блоки Today, Calendar, Progress всегда видны */
    .grid.grid-cols-1.md\\:grid-cols-3 {
        display: grid !important;
    }
    
    /* Grid контейнеры для секций - переопределяем скрытие если есть класс visible */
    .grid.lg\\:grid-cols-3.mobile-section-visible {
        display: grid !important;
    }
    
    .grid.lg\\:grid-cols-3.mobile-section-hidden {
        display: none !important;
    }
    
    /* Sidebar (цели) - скрыт по умолчанию */
    .grid.lg\\:grid-cols-3 > .lg\\:col-span-1 {
        display: none !important;
    }
    
    .grid.lg\\:grid-cols-3 > .lg\\:col-span-1.mobile-section-hidden {
        display: none !important;
    }
    
    .grid.lg\\:grid-cols-3 > .lg\\:col-span-1.mobile-section-visible {
        display: block !important;
    }
    
    /* Конкретные секции внутри grid - скрыты по умолчанию на мобильных */
    #activities.mobile-section-hidden,
    #rewards.mobile-section-hidden,
    #history.mobile-section-hidden {
        display: none !important;
    }
    
    #activities.mobile-section-visible,
    #rewards.mobile-section-visible,
    #history.mobile-section-visible {
        display: flex !important; /* flex для секций с классом flex flex-col */
    }
    
    /* Container */
    .container,
    #app-section,
    #app-section > div {
        max-width: 100% !important;
        width: 100% !important;
        box-sizing: border-box !important;
    }
    
    .container {
        max-width: 100%;
        padding-left: 0.75rem;
        padding-right: 0.75rem;
        margin-left: auto;
        margin-right: auto;
        box-sizing: border-box !important;
    }
    
    /* Grid */
    .grid {
        width: 100% !important;
        max-width: 100% !important;
        box-sizing: border-box !important;
        margin-left: 0 !important;
        margin-right: 0 !important;
        padding-left: 0 !important;
        padding-right: 0 !important;
    }
    
    .grid.lg\\:grid-cols-3 {
        width: 100% !important;
        max-width: 100% !important;
        box-sizing: border-box !important;
        margin-left: 0 !important;
        margin-right: 0 !important;
        gap: 1rem !important;
    }
    
    .grid.lg\\:grid-cols-3 > #activities,
    .grid.lg\\:grid-cols-3 > .lg\\:col-span-2 {
        width: 100% !important;
        max-width: 100% !important;
        box-sizing: border-box !important;
        margin-left: 0 !important;
        margin-right: 0 !important;
        padding-left: 0.75rem !important;
        padding-right: 0.75rem !important;
    }
    
    #activities * {
        max-width: 100% !important;
        box-sizing: border-box !important;
    }
    
    /* Activity cards */
    .activity-card {
        width: 100% !important;
        max-width: 100% !important;
        box-sizing: border-box !important;
        overflow-x: hidden !important;
    }
    
    .activity-card > div:first-child {
        min-width: 0 !important;
        flex: 1 1 auto !important;
        max-width: calc(100% - 12rem) !important;
        overflow: hidden !important;
    }
    
    .activity-card > button,
    .activity-card .timer-btn,
    .activity-card .manual-time-btn,
    .activity-card .edit-btn,
    .activity-card .delete-btn {
        flex-shrink: 0 !important;
        min-width: auto !important;
        width: auto !important;
    }
    
    /* Activities container */
    #activities,
    #activities > div,
    .bg-gradient-to-r.from-blue-50.to-indigo-50 {
        padding-right: 1rem !important;
        margin-right: 0 !important;
        box-sizing: border-box !important;
        max-width: 100% !important;
        width: 100% !important;
        overflow-x: visible !important;
        overflow-y: visible !important;
    }
    
    /* Bottom navigation стили вынесены в components/bottom-navigation/bottom-navigation.css */
    
    /* Social sections - основные стили в components/sections/social.css */
    #social {
        grid-template-columns: 1fr !important;
        gap: 1rem !important;
    }
    
    #social > div {
        width: 100% !important;
        max-width: 100% !important;
        grid-column: span 1 !important;
    }
    
    #social button span {
        display: inline !important;
    }
}

/* Desktop (1025px+) */
/* Bottom navigation стили вынесены в components/bottom-navigation/bottom-navigation.css */

/* Tablets (768px - 1024px) */
/* Social sections - основные стили в components/sections/social.css */
@media (min-width: 768px) and (max-width: 1024px) {
    #social {
        gap: 1rem !important;
    }
}

/* Very small screens (< 400px) */
@media (max-width: 400px) {
    .hidden.sm\:block {
        display: none !important;
    }
}
